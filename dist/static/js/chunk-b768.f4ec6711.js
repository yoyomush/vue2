(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b768"],{"G/yN":function(e,t,r){"use strict";r.r(t);var a=r("FyfS"),n=r.n(a),o=r("4d7F"),i=r.n(o),l=r("P2sY"),m=r.n(l),u=r("QbLZ"),s=r.n(u),c=r("go2R"),d=r("wk8/"),f=r("UwIj"),p=r("L2JU"),h={name:"Edit",data:function(){return{tempRoute:{},loading:!0,teamList:[],multipleSelection:[],id:null,memberDropList:[],platformList:[],dialogVisible:!1,dialogTitle:"",form:{coreTeamId:0,coreTeamName:"",functionTeamId:0,functionTeamName:"",isOwner:0,platformName:"",platformNumberId:0,teamRoasterId:0,userEmail:"",userNumberId:0,modifiedBy:null,modifiedTime:null,createdBy:null,createdTime:null},coreTeamList:[],functionTeamList:[],rules:{userNumberId:[{required:"true",message:"Please select name",trigger:"change"}],coreTeamId:[{required:"true",message:"Please select role of core team",trigger:"change"}],functionTeamId:[{required:"true",message:"Please select role of function team",trigger:"change"}]}}},computed:s()({},Object(p.b)(["roles","userid","username"])),created:function(){this.tempRoute=m()({},this.$route),this.setTagsViewTitle(),this.fetchData()},methods:{setTagsViewTitle:function(){var e=this.$route.params&&this.$route.params.id,t=m()({},this.tempRoute,{title:"Team Roster Edit-"+e});this.$store.dispatch("updateVisitedView",t)},handleSelectionChange:function(e){this.multipleSelection=e},fetchData:function(){var e=this,t=this.$route.params&&this.$route.params.id;i.a.all([Object(c.e)(t),Object(d.c)()]).then(function(t){e.teamList=t[0],e.memberDropList=t[1],e.memberDropList.sort(function(e,t){return e.skypeName>t.skypeName?1:-1}),e.teamList.forEach(function(t){var r=!0,a=!1,o=void 0;try{for(var i,l=n()(e.memberDropList);!(r=(i=l.next()).done);r=!0){var m=i.value;m.userNumberId===t.userNumberId&&e.$set(t,"skypeName",m.skypeName)}}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}}),e.teamList.sort(function(e,t){return e.teamRoasterId>t.teamRoasterId?1:-1}),e.loading=!1}),i.a.all([Object(c.c)(),Object(c.d)()]).then(function(t){e.coreTeamList=t[0],e.coreTeamList.sort(function(e,t){return e.coreTeamName>t.coreTeamName?1:-1});var r=t[1],a=t[0];r.sort(function(e,t){return e.functionTeamName>t.functionTeamName?1:-1}),a.forEach(function(t){e.$set(t,"options",[]);var a=!0,o=!1,i=void 0;try{for(var l,m=n()(r);!(a=(l=m.next()).done);a=!0){var u=l.value;u.coreTeamId===t.coreTeamId&&t.options.push({functionTeamId:u.functionTeamId,functionTeamName:u.functionTeamName})}}catch(e){o=!0,i=e}finally{try{!a&&m.return&&m.return()}finally{if(o)throw i}}}),e.functionTeamList=a}),Object(f.b)().then(function(t){e.platformList=t})},showDialog:function(e){this.resetForm(),"New"===e?(this.dialogTitle="Team Roster - New Item",this.form.platformNumberId=parseInt(this.$route.params&&this.$route.params.id)):"Edit"===e&&(this.dialogTitle="Team Roster - "+this.multipleSelection[0].name,this.form=this.multipleSelection[0]),this.dialogVisible=!0},updateMembers:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.setFormOtherInfo(),e.form.modifiedBy=e.username,Object(c.g)(e.form,e.form.teamRoasterId).then(function(t){var r=e.form,a={teamRoasterId:r.teamRoasterId,platformNumberId:r.platformNumberId,coreTeamId:r.coreTeamId,functionTeamId:r.functionTeamId,userNumberId:r.userNumberId,isOwner:r.isOwner,coreTeamName:r.coreTeamName,functionTeamName:r.functionTeamName,userEmail:r.userEmail,platformName:r.platformName,skypeName:r.skypeName};for(var n in e.teamList)if(n.teamRoasterId===e.form.teamRoasterId){var o=e.teamList.indexOf(n);e.teamList.splice(o,1,a);break}e.$notify({title:"Dell X-NUDD Tracker System",message:"Save Successfully",type:"success",duration:2e3}),e.dialogVisible=!1}).catch(function(t){e.$message.error(t)})})},submitMembers:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.setFormOtherInfo(),e.form.createdBy=e.username,Object(c.f)(e.form).then(function(t){e.form.teamRoasterId=t;var r=e.form,a={teamRoasterId:r.teamRoasterId,platformNumberId:r.platformNumberId,coreTeamId:r.coreTeamId,functionTeamId:r.functionTeamId,userNumberId:r.userNumberId,isOwner:r.isOwner,coreTeamName:r.coreTeamName,functionTeamName:r.functionTeamName,userEmail:r.userEmail,platformName:r.platformName,skypeName:r.skypeName};e.teamList.push(a),e.$notify({title:"Dell X-NUDD Tracker System",message:"Save Successfully",type:"success",duration:2e3}),e.dialogVisible=!1}).catch(function(t){e.$message.error(t)})})},deleteMembers:function(){var e=this;this.$confirm("Are you sure to delete selected team member?","Alert",{confirmButtonText:"Ok",cancelButtonText:"Cancel",type:"warning"}).then(function(){Object(c.a)(e.multipleSelection[0].teamRoasterId).then(function(t){var r=!0,a=!1,o=void 0;try{for(var i,l=n()(e.teamList);!(r=(i=l.next()).done);r=!0){var m=i.value;if(m.teamRoasterId===e.multipleSelection[0].teamRoasterId){var u=e.teamList.indexOf(m);e.teamList.splice(u,1)}}}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}e.$notify({title:"Dell X-NUDD Tracker System",message:"Delete Successfully",type:"success",duration:2e3})}).catch(function(t){e.$message.error(t)})}).catch(function(){e.$message({type:"info",message:"cancel delete"})})},resetForm:function(){this.form={coreTeamId:null,coreTeamName:"",functionTeamId:null,functionTeamName:"",isOwner:0,platformName:"",platformNumberId:0,teamRoasterId:0,userEmail:"",userNumberId:null,modifiedBy:null,modifiedTime:null,createdBy:null,createdTime:null}},setFormOtherInfo:function(){var e=!0,t=!1,r=void 0;try{for(var a,o=n()(this.coreTeamList);!(e=(a=o.next()).done);e=!0){var i=a.value;if(i.coreTeamId.toString()===this.form.coreTeamId.toString()){this.form.coreTeamName=i.coreTeamName;break}}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}var l=!0,m=!1,u=void 0;try{for(var s,c=n()(this.functionTeamList);!(l=(s=c.next()).done);l=!0){var d=s.value,f=!0,p=!1,h=void 0;try{for(var b,v=n()(d.options);!(f=(b=v.next()).done);f=!0){var T=b.value;if(T.functionTeamId.toString()===this.form.functionTeamId.toString()){this.form.functionTeamName=T.functionTeamName;break}}}catch(e){p=!0,h=e}finally{try{!f&&v.return&&v.return()}finally{if(p)throw h}}}}catch(e){m=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(m)throw u}}var y=!0,I=!1,N=void 0;try{for(var g,w=n()(this.platformList);!(y=(g=w.next()).done);y=!0){var _=g.value;if(_.platformNumberId.toString()===this.form.platformNumberId.toString()){this.form.platformName=_.name;break}}}catch(e){I=!0,N=e}finally{try{!y&&w.return&&w.return()}finally{if(I)throw N}}var k=!0,S=!1,O=void 0;try{for(var L,x=n()(this.memberDropList);!(k=(L=x.next()).done);k=!0){var R=L.value;R.userNumberId.toString()===this.form.userNumberId.toString()&&(this.$set(this.form,"skypeName",R.skypeName),this.form.userEmail=R.email)}}catch(e){S=!0,O=e}finally{try{!k&&x.return&&x.return()}finally{if(S)throw O}}},setHeaderStyle:function(e){var t=e.rowIndex;e.columnIndex;if(0===t)return"color: black;"},handleClose:function(e){this.$confirm("You are about to close this dialog!","Alert",{confirmButtonText:"Ok",cancelButtonText:"Cancel",type:"warning"}).then(function(){e()}).catch(function(){})}}},b=(r("h7Sz"),r("KHd+")),v=Object(b.a)(h,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},["admin"===e.roles?r("div",{staticStyle:{padding:"5px 0 15px 0"}},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.showDialog("New")}}},[e._v("New")]),e._v(" "),r("el-button",{attrs:{disabled:1!==e.multipleSelection.length,type:"primary",size:"mini"},on:{click:function(t){e.showDialog("Edit")}}},[e._v("Edit")]),e._v(" "),r("el-button",{attrs:{disabled:1!==e.multipleSelection.length,type:"primary",size:"mini"},on:{click:e.deleteMembers}},[e._v("Delete")])],1):e._e(),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.teamList,"header-cell-style":e.setHeaderStyle,"element-loading-text":"Loading",type:"section",border:"",fit:""},on:{"selection-change":e.handleSelectionChange}},["admin"===e.roles?r("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"Platform","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.platformName)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"Core Team","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.coreTeamName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"Function Team","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.functionTeamName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"Name","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.skypeName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"Email","min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.userEmail))])]}}])})],1),e._v(" "),r("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.memberDropList.length?[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("el-row",[r("el-form-item",{attrs:{label:"Name",prop:"userNumberId",required:""}},[r("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",placeholder:"Please select name"},model:{value:e.form.userNumberId,callback:function(t){e.$set(e.form,"userNumberId",t)},expression:"form.userNumberId"}},e._l(e.memberDropList,function(t){return r("el-option",{key:t.userNumberId,attrs:{value:t.userNumberId,label:t.skypeName}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.skypeName))]),e._v(" "),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"11px"}},[e._v(e._s(t.email))])])}))],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Role of Core Team",prop:"coreTeamId",required:""}},[r("el-select",{attrs:{filterable:"",placeholder:"Please select core role"},model:{value:e.form.coreTeamId,callback:function(t){e.$set(e.form,"coreTeamId",t)},expression:"form.coreTeamId"}},e._l(e.coreTeamList,function(e){return r("el-option",{key:e.coreTeamId,attrs:{value:e.coreTeamId,label:e.coreTeamName}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Role of Function Team",prop:"functionTeamId",required:""}},[r("el-select",{attrs:{filterable:"",placeholder:"Please select function role"},model:{value:e.form.functionTeamId,callback:function(t){e.$set(e.form,"functionTeamId",t)},expression:"form.functionTeamId"}},e._l(e.functionTeamList,function(t){return r("el-option-group",{key:t.coreTeamId,attrs:{label:t.coreTeamName}},e._l(t.options,function(e){return r("el-option",{key:e.functionTeamId,attrs:{label:e.functionTeamName,value:e.functionTeamId}})}))}))],1)],1)],1)],1)]:e._e(),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){0!==e.form.teamRoasterId?e.updateMembers():e.submitMembers()}}},[e._v("Save")])],1)],2)],1)},[],!1,null,"cca62868",null);v.options.__file="edit.vue";t.default=v.exports},UwIj:function(e,t,r){"use strict";r.d(t,"d",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"e",function(){return i}),r.d(t,"b",function(){return l}),r.d(t,"c",function(){return m});var a=r("t3Un");function n(e){return Object(a.a)({url:"/nudd/pbi",method:"post",data:e})}function o(e){return Object(a.a)({url:"/nudd/pbi/"+e,method:"delete"})}function i(e,t){return Object(a.a)({url:"/nudd/pbi/"+t,method:"put",data:e})}function l(){return Object(a.a)({url:"/nudd/pbi",method:"get"})}function m(e){return Object(a.a)({url:"/nudd/pbi/"+e,method:"get"})}},go2R:function(e,t,r){"use strict";r.d(t,"f",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"g",function(){return i}),r.d(t,"b",function(){return l}),r.d(t,"e",function(){return m}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return s});var a=r("t3Un");function n(e){return Object(a.a)({url:"/nudd/nuddtr",method:"post",data:e})}function o(e){return Object(a.a)({url:"/nudd/nuddtr/"+e,method:"delete"})}function i(e,t){return Object(a.a)({url:"/nudd/nuddtr/"+t,method:"put",data:e})}function l(){return Object(a.a)({url:"/nudd/nuddtr",method:"get"})}function m(e){return Object(a.a)({url:"/nudd/nuddtr/platform/"+e,method:"get"})}function u(){return Object(a.a)({url:"/nudd/coreteam",method:"get"})}function s(){return Object(a.a)({url:"/nudd/functionteam",method:"get"})}},h7Sz:function(e,t,r){"use strict";var a=r("t5h+");r.n(a).a},"t5h+":function(e,t,r){}}]);