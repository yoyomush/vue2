(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8e94"],{NHni:function(e,t,r){},OiDR:function(e,t,r){"use strict";var i=r("NHni");r.n(i).a},"gDS+":function(e,t,r){e.exports={default:r("oh+g"),__esModule:!0}},oQqX:function(e,t,r){"use strict";r.r(t);var i=r("FyfS"),a=r.n(i),l=r("gDS+"),n=r.n(l),o=r("QbLZ"),s=r.n(o),c=r("wk8/"),u=r("L2JU"),m={name:"Team",data:function(){return{list:[],listLoading:!0,total:0,pageSize:15,currentPage:1,searchEmail:"",dialogVisible:!1,dialogTitle:"",memberList:[],typeList:[{label:"Manager",value:"Manager"},{label:"Individual",value:"Individual"}],form:{badgeNumber:null,createdBy:null,createdTime:null,email:null,level:"",modifiedBy:null,modifiedTime:null,nuddTracker:"",org:"",parentId:null,performanceContract:"",skypeName:"",token:"",tokenExpired:null,userNumberId:0},rules:{badgeNumber:[{required:!0,message:"Badge Number should be number",trigger:"blur"}],skypeName:[{required:!0,message:"Skype Name can't be blank",trigger:"blur"}],email:[{required:!0,type:"email",message:"Error email format",trigger:"blur"}],parentId:[{required:!0,message:"Direct Report can't be blank",trigger:"change"}],org:[{required:!0,message:"Manager or Individual can't be blank",trigger:"change"}]}}},computed:s()({},Object(u.b)(["roles","userid","username"])),created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,Object(c.c)().then(function(t){e.list=t,e.total=e.list.length,e.memberList=e.list.filter(function(e){return"manager"===e.org||"Manager"===e.org}),e.memberList.sort(function(e,t){return e.skypeName>t.skypeName?1:-1}),e.listLoading=!1})},changePagination:function(e){this.currentPage=e},reload:function(){var e=this;this.listLoading=!0,Object(c.c)().then(function(t){e.list=t,e.total=e.list.length,e.listLoading=!1,e.memberList=e.list.filter(function(e){return"manager"===e.org||"Manager"===e.org}),e.memberList.sort(function(e,t){return e.skypeName>t.skypeName?1:-1})})},handleFilter:function(){var e=this;this.currentPage=1,this.list=this.list.filter(function(t){return t.skypeName.toLowerCase().includes(e.searchEmail.toLowerCase())||t.email.toLowerCase().includes(e.searchEmail.toLowerCase())}),this.total=this.list.length},showDialog:function(e){"New"===e?(this.dialogTitle="Team List - New Item",this.resetForm(),void 0!==this.$refs.form&&this.$nextTick(this.$refs.form.resetFields())):this.dialogTitle="Team List - Update Item",this.dialogVisible=!0},resetForm:function(){this.form={badgeNumber:"",createdBy:null,createdTime:null,email:"",level:"",modifiedBy:null,modifiedTime:null,nuddTracker:null,org:"",parentId:"",performanceContract:null,skypeName:"",token:"",tokenExpired:null,userNumberId:0}},insertMembers:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.form=JSON.parse(n()(e.form)),e.form.email=e.form.email.toLowerCase(),e.form.createdBy=e.username,Object(c.d)(e.form).then(function(t){console.log(t),0===t?e.$confirm("User already exist!","Alert",{confirmButtonText:"Got it!",type:"warning"}):(e.list.push(e.form),e.$notify({title:"Dell X-NUDD Tracker System",message:"Save Successfully",type:"success",duration:2e3})),e.reload(),e.dialogVisible=!1,e.$refs.form.resetFields()}).catch(function(t){e.$message.error(t)})})},deleteMembers:function(e){var t=this;this.$confirm("Are you sure to delete this name?","Alert",{confirmButtonText:"Ok",cancelButtonText:"Cancel",type:"warning"}).then(function(){Object(c.b)(e).then(function(e){var r=!0,i=!1,l=void 0;try{for(var n,o=a()(t.list);!(r=(n=o.next()).done);r=!0){var s=n.value;if(s.id===t.form.id){var c=t.list.indexOf(s);t.list.splice(c,1);break}}}catch(e){i=!0,l=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw l}}t.$notify({title:"Dell X-NUDD Tracker System",message:"Delete Successfully",type:"success",duration:2e3}),t.reload()})}).catch(function(){t.$message({type:"info",message:"cancel delete"})})},editItem:function(e){var t=!0,r=!1,i=void 0;try{for(var l,n=a()(this.list);!(t=(l=n.next()).done);t=!0){var o=l.value;if(o.userNumberId===e){this.form=o;break}}}catch(e){r=!0,i=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw i}}this.showDialog("Edit")},updateMembers:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;var r=JSON.parse(n()(e.form));r.email=r.email.toLowerCase(),r.modifiedBy=e.username,Object(c.e)(r,r.userNumberId).then(function(t){var r=!0,i=!1,l=void 0;try{for(var n,o=a()(e.list);!(r=(n=o.next()).done);r=!0){var s=n.value;if(s.userNumberId===e.form.userNumberId){var c=e.list.indexOf(s);e.list.splice(c,1,e.form);break}}}catch(e){i=!0,l=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw l}}e.$notify({title:"Dell X-NUDD Tracker System",message:"Save Successfully",type:"success",duration:2e3}),e.dialogVisible=!1,e.reload(),e.$refs.form.resetFields()}).catch(function(t){e.$message.error(t)})})},handleClose:function(e){this.$confirm("You are about to close this dialog!","Alert",{confirmButtonText:"Ok",cancelButtonText:"Cancel",type:"warning"}).then(function(){e()}).catch(function(){})}}},d=(r("OiDR"),r("KHd+")),f=Object(d.a)(m,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"Search Email"},model:{value:e.searchEmail,callback:function(t){e.searchEmail=t},expression:"searchEmail"}}),e._v(" "),r("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("Search")]),e._v(" "),r("el-button",{staticClass:"filter-item",attrs:{disabled:"visitor"===e.roles,type:"primary",size:"mini",icon:"el-icon-circle-plus"},on:{click:function(t){e.showDialog("New")}}},[e._v("Add")]),e._v(" "),r("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:e.reload}},[e._v("Reload")])],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{label:"Name","min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.skypeName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"Email","min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.email))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"Actions",align:"center","min-width":"40%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:"visitor"===e.roles,type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(r){e.editItem(t.row.userNumberId)}}},[e._v("Edit")]),e._v(" "),r("el-button",{attrs:{disabled:"visitor"===e.roles,type:"primary",size:"mini",icon:"el-icon-delete"},on:{click:function(r){e.deleteMembers(t.row.userNumberId)}}},[e._v("Delete")])]}}])})],1),e._v(" "),r("el-pagination",{attrs:{total:e.total,"page-size":e.pageSize,background:"",layout:"prev, pager, next"},on:{"current-change":e.changePagination}}),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible,"before-close":e.handleClose,title:e.dialogTitle},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"Badge Number",prop:"badgeNumber",required:""}},[r("el-input",{attrs:{type:"number",placeholder:"984115"},model:{value:e.form.badgeNumber,callback:function(t){e.$set(e.form,"badgeNumber",t)},expression:"form.badgeNumber"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Skype Name",prop:"skypeName",required:""}},[r("el-input",{attrs:{placeholder:"Skype name"},model:{value:e.form.skypeName,callback:function(t){e.$set(e.form,"skypeName",t)},expression:"form.skypeName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Email",prop:"email",required:""}},[r("el-input",{attrs:{placeholder:"Email address"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Direct Report",prop:"parentId",required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"Please select direct report name"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}},e._l(e.memberList,function(t){return r("el-option",{key:t.userNumberId,attrs:{value:t.userNumberId,label:t.skypeName}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.skypeName))]),e._v(" "),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"11px"}},[e._v(e._s(t.email))])])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"Manager or Individual",prop:"org",required:""}},[r("el-select",{staticStyle:{width:"100%"},model:{value:e.form.org,callback:function(t){e.$set(e.form,"org",t)},expression:"form.org"}},e._l(e.typeList,function(e){return r("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}))],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){0!==e.form.userNumberId?e.updateMembers():e.insertMembers()}}},[e._v("Save")])],1)],1)],1)},[],!1,null,"3633d6ae",null);f.options.__file="index.vue";t.default=f.exports},"oh+g":function(e,t,r){var i=r("WEpk"),a=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}}}]);